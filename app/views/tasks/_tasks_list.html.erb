<%= form_tag destroy_multiple_tasks_path,  method: :delete do %>
<div class="d-flex justify-content-center">
    <div id="check-all-tasks" class="btn btn-link">check all</div>
    <div id="uncheck-all-tasks" class="btn btn-link">uncheck all</div>
    <%= link_to 'sort by title', request.path_info + '?sort=title', class:'btn btn-link', method: :get %>

</div>
<% @tasks.each do |task| %>
<div class="card mb-2 task" data-task-id="<%= task.id %>">
    <div class="card-body d-flex justify-content-between">
        <div class="">
            <%= check_box_tag "tasks_to_delete[]", task.id, false,  :data => { :task_to_delete_checkbox => 'true'} %>
            <h3 class="task__title card-title d-inline-block mb-0">
                <a class="task__title-link d-inline-block" href="<%= task_path(task.id) %>"><%= task.title %></a>
            </h3>
        </div>
        <div class="d-flex align-items-center">
            <div class="task__buttons pr-3">
                <% if task.is_completed %>
                <%= link_to 'Make active', complete_task_path(task.id), class:'complete-task', method: :put, remote: true %>
                <% else %>
                <%= link_to 'Make completed', complete_task_path(task.id), class:'complete-task', method: :put, remote: true %>
                <% end %>
                <%= link_to 'edit', edit_task_path(task.id) %>
                <%= link_to 'delete', task_path(task.id), method: :delete %>
            </div>
            <div class="task__priority">
                <% task.priority.times do |star| %>
                <span class="star text-orange">&#9733;</span>
                <% end %>
                <% (5-task.priority).times do |star| %>
                <span class="star">&#9733;</span>
                <% end %>
            </div>
        </div>
    </div>
</div>
<% end %>
<div class="d-flex justify-content-center">
    <%= submit_tag "Delete selected", :class => 'btn btn-secondary', :id => 'delete-selected-button', :style => 'display:none' %>
</div>
<% end %>